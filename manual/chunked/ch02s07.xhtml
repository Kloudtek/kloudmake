<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml"><head><title>Resource refresh</title><link href="docbook.css" type="text/css" rel="stylesheet"/><meta content="DocBook XSL Stylesheets V1.78.1" name="generator"/><link rel="prev" href="ch02s06.xhtml" title="Resource Dependencies"/><link rel="next" href="ch03.xhtml" title="Chapter 3. Using scripting languages"/><script xmlns="" type="text/javascript" src="https://google-code-prettify.googlecode.com/svn/loader/run_prettify.js"/></head><body><header><div class="navheader"><table style="width: 100%; "><tr><th style="text-align: center; " colspan="3">Resource refresh</th></tr><tr><td style="text-align: left; width: 20%; "><a accesskey="p" href="ch02s06.xhtml">Prev</a> </td><th style="text-align: center; width: 60%; ">Chapter 2. Using the SysTyrant Language (DSL)</th><td style="text-align: right; width: 20%; "> <a accesskey="n" href="ch03.xhtml">Next</a></td></tr></table><hr/></div></header><section class="section" id="N40276"><div class="titlepage"><div><div><h2 class="title" style="clear: both">Resource refresh</h2></div></div></div>
        
        <p>
            Resources can support refresh actions. The effect of a refresh will depend on the resource, but for example
            when you refresh a <code class="code">core:service</code> that is set as runnable, it will cause the service to be restarted.
        </p>
        <p>
            Refreshing is done using notifications or subscription.
        </p>
        <p>
            A notification can be set by using the common attribute `notify` (the content of which is a resource query
            expression) to specify which resources should be refreshed after the resource is executed.
        </p>
        <p>
            Alternatively you can use the attribute `subscribe` (the content of which is also resource query expression)
            on a resource, and this will cause it to be refresh after the execution of any matching resource.
        </p>
        <p>
            A refresh will only occur if the notifying/subscribed resource is executed after the resource has been
            executed. SysTyrant will try to be as efficient and perform the least refreshes possible. This means:
            </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
                    It will attempt to execute the notifying/subscribed resources before the refreshed resource (if
                    that can be done this will naturally means the refresh will not happen).
                </li><li class="listitem">
                    It will only perform one refresh for multiple notifying/subscribed if those resources have no
                    dependencies on each other (direct or indirect)
                </li></ul></div><p>
        </p>
        <p>
            So for example:
            </p><pre class="prettyprint">core:service { myserver: }
servercfg { config1: notify="@id = myserver" }
servercfg { config2: notify="@id = myserver", after = "@id = myserver" }
servercfg { config3: notify="@id = myserver", after = "@id = myserver" }
servercfg { config4: notify="@id = myserver", after = "@id = config3" }</pre><p>
        </p>
        <p>
            This will result in:
            </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">config1 will be executed (no refresh of myserver will occur since it hasn't been executed yet)</li><li class="listitem">myserver will be executed</li><li class="listitem">config2 will be executed</li><li class="listitem">config3 will be executed</li><li class="listitem">myserver will be refreshed</li><li class="listitem">config4 will be executed</li><li class="listitem">myserver will be refreshed</li></ol></div><p>
        </p>
    </section><footer><div class="navfooter"><hr/><table style="width: 100%; "><tr><td style="text-align: left; width: 40%; "><a accesskey="p" href="ch02s06.xhtml">Prev</a> </td><td style="text-align: center; width: 20%; "><a accesskey="u" href="ch02.xhtml">Up</a></td><td style="text-align: right; width: 40%; "> <a accesskey="n" href="ch03.xhtml">Next</a></td></tr><tr><td style="vertical-align: top; text-align: left; width: 40%; ">Resource Dependencies </td><td style="text-align: center; width: 20%; "><a accesskey="h" href="index.xhtml">Home</a></td><td style="vertical-align: top; text-align: right; width: 40%; "> Chapter 3. Using scripting languages</td></tr></table></div></footer></body></html>